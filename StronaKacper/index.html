<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gift Box Animation</title>
  <style>
    /* --- GLOBAL VARIABLES --- */
    :root {
      /* Standard height for the text pop-up */
      --jump-height: 240px; 
    }

    body {
      margin: 0;
      padding: 0;
      background: rgb(15, 48, 110);
      font-family: times-new-roman;
      scroll-behavior: smooth;
    }

    .container {
      width: 100%;
    }
    
    /* --- Sections --- */
    .section {
      min-height: 100vh; 
      min-height: 100dvh;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      box-sizing: border-box;
      overflow: hidden; 
      border-bottom: 1px solid #333;
      padding: 20px; 
    }
    
    /* --- TITLE STYLES --- */
    .section-title {
      font-size: 50px;
      font-weight: bold;
      color: #fff;
      text-align: center;
      text-transform: uppercase;
      z-index: 20;
      
      position: absolute;
      top: 5%; 
      left: 50%;
      transform: translateX(-50%);
      margin: 0;
      width: 100%; 
      
      /* Add transition for fading out */
      transition: opacity 0.5s ease, visibility 0.5s ease;
      opacity: 1;
      visibility: visible;
    }

    /* Class to hide title when box opens */
    .section-title.hidden {
      opacity: 0;
      visibility: hidden;
    }
    
    /* --- FIXED BUTTON STYLES --- */
    .reopen-btn {
      position: absolute; /* Changed from relative to absolute */
      bottom: 20%;        /* Positions it relative to the bottom of the screen */
      left: 50%;          /* Centers it horizontally */
      transform: translateX(-50%); /* Exact center alignment */
      
      /* Existing styles below... */
      padding: 12px 30px;
      font-size: 16px;
      font-weight: bold;
      background: rgb(15, 48, 110);
      border: 4px solid #fff; 
      border-radius: 25px;
      color: #fff;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
      z-index: 500;
      
      /* Remove margin-top as it is no longer needed */
      margin-top: 0; 
    }
    
    .reopen-btn:hover {
      background: rgb(15, 48, 110);
      transform: translateY(-2px);
    }
    
    /* --- Scroll Text --- */
    .scroll-text {
      position: absolute; 
      bottom: 15px; 
      left: 50%;
      transform: translateX(-50%);
      font-size: 18px;
      color: #fff;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      z-index: 50;
      background: rgba(31, 33, 35, 0.9);
      padding: 10px 25px;
      border-radius: 25px;
      white-space: nowrap;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
    }

    .scroll-text:hover {
      background: rgba(42, 48, 54, 0.9); 
      transform: translateX(-50%) scale(1.05);
    }
    
    .arrow {
      font-size: 24px;
      animation: bounce 1s infinite;
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(5px); }
    }
    
    .section-image {
      max-width: 90%;
      max-height: 80vh;
      max-height: 80dvh;
      object-fit: contain;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    }
    
    /* --- Gift Box Logic --- */
    .gift-container {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: visible;
      margin-top: 20px; 
    }

    /* --- Sunburst Glow Effect --- */
    .sunburst-glow {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 600px;
      height: 600px;
      z-index: -1;
      pointer-events: none;
      border-radius: 50%;
      background: repeating-conic-gradient(
        from 0deg,
        rgba(112, 179, 255, 0.2) 0deg 10deg,
        transparent 10deg 20deg
      );
      -webkit-mask-image: radial-gradient(circle, black 30%, transparent 70%);
      mask-image: radial-gradient(circle, black 30%, transparent 70%);
      animation: 
        sunburst-spin 60s linear infinite, 
        sunburst-pulse 4s ease-in-out infinite alternate;
    }

    @keyframes sunburst-spin {
      from { transform: translate(-50%, -50%) rotate(0deg); }
      to   { transform: translate(-50%, -50%) rotate(360deg); }
    }

    @keyframes sunburst-pulse {
      0%   { opacity: 0.5; scale: 1; }
      100% { opacity: 0.8; scale: 1.05; }
    }

    /* --- BOX STYLES --- */
    .box {
      background-image: url('images/box.png'); 
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center bottom;
      background-color: transparent;
      border: 0;
      padding: 0;
      position: relative;
      cursor: pointer;
      outline: none;
      width: 250px; 
      height: 200px; 
      transition: transform 0.1s;
      z-index: 10;
    }
    
    .box:active {
      transform: scale(0.98);
    }

    /* --- LID STYLES --- */
    .lid {
      background-image: url('images/lid.png');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center bottom;
      background-color: transparent;
      position: absolute;
      top: -50px; 
      left: 50%;
      transform: translate(-50%);
      width: 520px; 
      height: 120px; 
      z-index: 11;
      transform-origin: top center; 
      filter: drop-shadow(0px 5px 10px rgba(0, 0, 0, 0.4));
    }

    .lid.rotated {
      box-shadow: none; 
    }

    /* --- Hidden Character/Text --- */
    .character {
      position: absolute;
      bottom: 0; 
      left: 50%;
      transform: translateX(-50%);
      z-index: 15;
      width: 300px;
      text-align: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }

    .gift-text {
      font-size: 28px;
      font-weight: bold;
      color: #fff;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
      padding: 20px 30px;
      background: rgb(15, 48, 110);
      border: 4px solid #fff;
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
      display: inline-block;
    }
    
    .gift-text::after {
        content: '';
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        border-width: 10px 10px 0;
        border-style: solid;
        border-color: #fff transparent;
        display: block;
        width: 0;
    }

    /* --- Animations --- */
    .wiggle {
      animation: 0.5s wiggle infinite linear;
    }

    .rotating {
      animation: 1s rotating forwards ease-in-out;
    }

    .rotated {
      transform: rotate(120deg) translate(-80%, -250px);
    }

    .pop-up {
      animation: 0.6s pop-up forwards cubic-bezier(0.175, 0.885, 0.32, 1.275);
      opacity: 1;
    }

    @keyframes wiggle {
      0%, 100% { transform: translate(-50%) rotate(0deg); }
      25% { transform: translate(-50%) rotate(-3deg); }
      75% { transform: translate(-50%) rotate(3deg); }
    }

    @keyframes rotating {
      0% { transform: translate(-50%) rotate(0deg); }
      100% { transform: rotate(120deg) translate(-80%, -250px); }
    }

    /* UPDATED POP-UP ANIMATION USING VARIABLE */
    @keyframes pop-up {
      0% { bottom: 0; opacity: 0; transform: translateX(-50%) scale(0.5); }
      50% { opacity: 1; }
      /* Use the CSS Variable here */
      100% { bottom: var(--jump-height); opacity: 1; transform: translateX(-50%) scale(1); }
    }

    /* --- Hands Styling --- */
    .hands-around {
      position: absolute;
      pointer-events: none;
      z-index: 20;
      animation: pulse-hand 1.5s ease-in-out infinite;

      /* Now using a background image for the arrow */
      background-image: url('images/arrow.svg'); /* Now using image */
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;

      width: 50px; /* Adjust size for the arrow image */
      height: 50px; /* Adjust size for the arrow image */

      /* Removing text-based styles */
      font-size: 0; 
      color: transparent; 
      text-shadow: none;
    }

    .hand-top {
      top: -150px;
      left: 50%;
      transform: translateX(-50%) rotate(180deg);
    }

    .hand-bottom {
      bottom: -100px;
      left: 50%;
      transform: translateX(-50%) ;
    }

    .box.is-open .hands-around {
        display: none;
    }

    @keyframes pulse-hand {
      0%, 100% { margin: 0; }
      50% { margin: 10px; }
    }

    /* --- Confetti --- */
    .confetti {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 1000;
    }

    .confetti-piece {
      position: absolute;
      display: block;
      width: 10px;
      height: 10px;
      opacity: 0;
    }

    .confetti-piece.animated {
      animation: 2.5s bang forwards ease-out;
    }

    @keyframes bang {
      0% { opacity: 1; transform: translate3d(0,0,0) scale(1); }
      100% { opacity: 0; transform: translate3d(var(--tx), var(--ty), 0) rotate(var(--rot)) scale(0.5); }
    }

    /* --- Footer --- */
    footer {
      background: #0c1e42;
      color: #fff;
      padding: 40px 20px;
      text-align: center;
    }
    
    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
    }

    .image-link {
      display: flex; /* Makes the link a flex container */
      justify-content: center; /* Centers the image horizontally inside the link */
      align-items: center; /* Centers the image vertically */
      width: 100%; /* Ensures the link spans the width so it can center the image */
      text-decoration: none; 
    }
    
    .footer-logo { font-size: 24px; font-weight: bold; margin-bottom: 20px; }
    .footer-logo img { max-height: 50px; }
    .footer-info { margin: 10px 0; font-size: 14px; line-height: 1.8; }
    .footer-tagline { margin-top: 30px; font-size: 18px; font-weight: bold; }

    /* --- Mobile Optimization --- */
    @media (max-height: 600px) {
      /* Change the variable to a smaller value on short screens */
      :root {
        --jump-height: 120px; 
      }
      
      .section-title { font-size: 36px; top: 10px; } 
      .box { width: 180px; height: 144px; }
      .lid { width: 375px; height: 86px; top: -35px; }
      .hands-around { width: 40px; height: 40px; }
      .hand-top { top: -100px; }
      .hand-bottom { bottom: -80px; }
      .section { padding-top: 60px; padding-bottom: 80px; }
    }

    .top-logo {
      position: absolute;
      top: 25px;
      left: 25px;
      width: 150px; /* Controls the size - adjust as needed */
      z-index: 100; /* Ensures it sits above everything */
      opacity: 0.9;
      transition: opacity 0.3s;
    }

    .top-logo:hover {
      opacity: 1;
    }

    .top-logo img {
      width: 100%;
      height: auto;
      display: block;
    }

    /* Make it smaller on mobile screens so it doesn't hit the title */
    @media (max-width: 768px) {
      .top-logo {
        width: 100px;
        top: 15px;
        left: 15px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    
    <section class="section" id="section1">
      <a href="https://grupamoderator.pl" target="_blank" class="top-logo">
        <img src="https://grupamoderator.pl/_Resources/Static/Packages/App.Site/Images/logo-white.png" alt="Logo">
      </a>
      <h1 class="section-title" id="mainTitle">Kliknij i&nbsp;rozpakuj!</h1>
      
      <div class="gift-container">
        <div class="sunburst-glow"></div>

        <div class="confetti" id="confetti"></div>
        
        <div class="character" id="character">
          <div class="gift-text" id="giftText">Jesteś super!</div>
        </div>

        <button class="box" id="box">
          <div class="lid" id="lid"></div>
          
          <div class="hands-around hand-top">&#x2193;</div>
          <div class="hands-around hand-bottom">&#x2193;</div>
        </button>
      </div>
      
      <button class="reopen-btn" id="reopenBtn" style="display: none;">Otwórz ponownie</button>
      
      <div class="scroll-text" id="scrollBtn1">
        <span class="arrow">↓</span>
        <span>MAMY DLA CIEBIE COŚ JESZCZE</span>
        <span class="arrow">↓</span>
      </div>
    </section>
    
    <section class="section" id="section2">
      <a href="https://grupamoderator.pl/oferta/mickiewicza" target="_blank" class="image-link">
          <img src="images/img3.jpg" alt="Obraz 3" class="section-image">
      </a>
      
      <div class="scroll-text" id="scrollBtn2">
        <span class="arrow">↓</span>
        <span>JEST COŚ WIĘCEJ</span>
        <span class="arrow">↓</span>
      </div>
    </section>
    
    <section class="section" id="section3">
      <a href="https://grupamoderator.pl/oferta/symfonia" target="_blank" class="image-link">
          <img src="images/img1.jpg" alt="Obraz 1" class="section-image">
      </a>
      <div class="scroll-text" id="scrollBtn3">
        <span class="arrow">↓</span>
        <span>I NA SAM KONIEC</span>
        <span class="arrow">↓</span>
      </div>
    </section>

    <section class="section" id="section4">
      <a href="https://grupamoderator.pl/oferta/ceramika" target="_blank" class="image-link">
          <img src="images/img2.jpg" alt="Obraz 2" class="section-image">
      </a>
    </section>
    
    <footer>
      <div class="footer-content">
        <div class="footer-logo"><img src="https://grupamoderator.pl/_Resources/Static/Packages/App.Site/Images/logo-white.png"></div>
        <div class="footer-info">
          ul. Focha 12, 85-070 Bydgoszcz
        </div>
        <div class="footer-info">
          Email: sprzedaz@grupamoderator.pl
        </div>
        <div class="footer-info">
          Nr: 796 909 090
        </div>
        <div class="footer-info">
          KRS 0000774601 | NIP 9671425820 | REGON 382705990
        </div>
        <div class="footer-tagline">
          Zmieniamy Bydgoszcz.
        </div>
      </div>
    </footer>
  </div>

  <script>
    const box = document.getElementById('box');
    const lid = document.getElementById('lid');
    const character = document.getElementById('character');
    const confettiContainer = document.getElementById('confetti');
    const giftText = document.getElementById('giftText');
    const reopenBtn = document.getElementById('reopenBtn');
    const mainTitle = document.getElementById('mainTitle'); // Reference to Title
    
    const scrollBtn1 = document.getElementById('scrollBtn1');
    const scrollBtn2 = document.getElementById('scrollBtn2');
    const section2 = document.getElementById('section2');
    const section3 = document.getElementById('section3');

    let isAnimating = false;
    let confettiPieces = [];

    const giftMessages = [
      "Nie licz kalorii w grudniu.",
      "Jesteś najlepszym prezentem.",
      "Uśmiech to Twoja ozdoba.",
      "Błyszczysz jaśniej niż choinka.",
      "Bądź dla kogoś Mikołajem.",
      "Masz w sobie dużo ciepła.",
      "Zasługujesz na to, co najlepsze.",
      "Dzisiaj wyglądasz magicznie.",
      "Twój uśmiech topi lód.",
      "Bądź sobą, to wystarczy.",
      "Przytulanie jest za darmo.",
      "Ciesz się małymi rzeczami.",
      "Promieniujesz dobrą energią.",
      "Jesteś kimś wyjątkowym.",
      "Jeden piernik nie tuczy.",
      "Lepiej zjeść i żałować, niż nie zjeść.",
      "Wyglądasz na prezent z najwyższej półki.",
      "Kto rano wstaje, ten zjada więcej.",
      "Lepiej się śmiać, niż narzekać.",
      "Zrób coś szalonego.",
      "Pomyśl życzenie – teraz!",
      "Wesołych Świąt!",
      "Miłego dnia!",
      "Uśmiechnij się!",
      "Fajnie Cię widzieć.",
      "Prezentów nigdy za dużo.",
      "Ciesz się chwilą."
    ];

    scrollBtn1.addEventListener('click', () => {
      section2.scrollIntoView({ behavior: 'smooth' });
    });

    scrollBtn2.addEventListener('click', () => {
      section3.scrollIntoView({ behavior: 'smooth' });
    });

     scrollBtn3.addEventListener('click', () => {
      section4.scrollIntoView({ behavior: 'smooth' });
    });

    function createConfetti() {
      confettiContainer.innerHTML = '';
      confettiPieces = [];
      
      for (let i = 0; i < 100; i++) {
        const piece = document.createElement('div');
        piece.className = 'confetti-piece';
        
        const hue = Math.floor(Math.random() * 360);
        piece.style.background = `hsl(${hue}, 100%, 50%)`;
        
        const tx = (Math.random() - 0.5) * 1500 + 'px';
        const ty = (Math.random() - 0.5) * 1500 + 'px';
        const rot = Math.random() * 720 + 'deg';
        
        piece.style.setProperty('--tx', tx);
        piece.style.setProperty('--ty', ty);
        piece.style.setProperty('--rot', rot);
        
        piece.style.left = '50%';
        piece.style.top = '50%';
        
        confettiContainer.appendChild(piece);
        confettiPieces.push(piece);
      }
    }

    function animate() {
      if (isAnimating) return;
      isAnimating = true;
      
      const randomMessage = giftMessages[Math.floor(Math.random() * giftMessages.length)];
      giftText.textContent = randomMessage;
      
      lid.classList.add('wiggle');
      box.classList.add('is-open');

      // Hide the title to make room for the gift text
      mainTitle.classList.add('hidden');

      setTimeout(() => {
        lid.classList.remove('wiggle');
        lid.classList.add('rotating'); 
        character.classList.add('pop-up');
        
        confettiPieces.forEach(piece => {
           piece.classList.remove('animated');
           void piece.offsetWidth;
           piece.classList.add('animated');
        });
        
        setTimeout(() => {
           lid.classList.remove('rotating');
           lid.classList.add('rotated');
           reopenBtn.style.display = 'block';
        }, 1000);

      }, 600);
    }

    function resetGift() {
      lid.classList.remove('wiggle', 'rotating', 'rotated');
      character.classList.remove('pop-up');
      box.classList.remove('is-open');
      
      // Bring the title back
      mainTitle.classList.remove('hidden');
      
      reopenBtn.style.display = 'none';
      createConfetti();
      isAnimating = false;
    }

    box.addEventListener('click', animate);
    reopenBtn.addEventListener('click', resetGift);
    
    createConfetti();
  </script>
</body>
</html>